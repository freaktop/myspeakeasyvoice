<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Command Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .results {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .command-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¤ SpeakEasy Voice Command Test</h1>
        
        <div class="test-section">
            <h2>Command Parser Test</h2>
            <input type="text" id="commandInput" class="command-input" placeholder="Enter a voice command..." value="open chrome">
            <button class="test-button" onclick="testCommand()">Test Command</button>
            <button class="test-button" onclick="testSampleCommands()">Test Sample Commands</button>
            <div id="commandResult" class="results"></div>
        </div>

        <div class="test-section">
            <h2>System Tests</h2>
            <button class="test-button" onclick="runAllTests()">Run All Tests</button>
            <button class="test-button" onclick="runQuickTest()">Quick Test</button>
            <button class="test-button" onclick="clearResults()">Clear Results</button>
            <div id="testResults" class="results"></div>
        </div>

        <div class="test-section">
            <h2>Available Commands</h2>
            <ul>
                <li><strong>App Control:</strong> "open chrome", "launch camera", "start messages"</li>
                <li><strong>Text Input:</strong> "type hello world", "write meeting notes"</li>
                <li><strong>Search:</strong> "search weather", "google restaurants"</li>
                <li><strong>Media:</strong> "play music", "pause", "next song"</li>
                <li><strong>System:</strong> "brightness up", "wifi on", "bluetooth off"</li>
                <li><strong>Actions:</strong> "screenshot", "copy", "paste", "delete"</li>
                <li><strong>Help:</strong> "help", "what can I say"</li>
            </ul>
        </div>

        <div id="status" class="status"></div>
    </div>

    <script type="module">
        // Import the voice command modules (for testing in browser)
        console.log('ðŸ§ª Voice Command Test Page Loaded');

        // Sample command test data
        const sampleCommands = [
            'open chrome',
            'type hello world',
            'search for weather',
            'play music',
            'take screenshot',
            'help',
            'copy',
            'paste',
            'delete',
            'brightness up',
            'wifi on',
            'bluetooth off',
            'hey speakeasy open chrome',
            'volume up',
            'scroll down',
            'go home'
        ];

        // Mock the voice command parser for testing
        function mockParseCommand(command) {
            const lower = command.toLowerCase().trim();
            
            // App commands
            if (lower.match(/^(open|launch|start)\s+(.+)$/)) {
                return { type: 'open_app', target: command.match(/^(open|launch|start)\s+(.+)$/)[2] };
            }
            
            // Type commands
            if (lower.match(/^(type|write|dictate)\s+(.+)$/)) {
                return { type: 'type_text', text: command.match(/^(type|write|dictate)\s+(.+)$/)[2] };
            }
            
            // Search commands
            if (lower.match(/^(search|google|look up|find)\s+(.+)$/)) {
                return { type: 'search', text: command.match(/^(search|google|look up|find)\s+(.+)$/)[2] };
            }
            
            // Media commands
            if (['play', 'pause', 'stop', 'next', 'previous', 'skip', 'mute', 'unmute'].some(cmd => lower === cmd)) {
                return { type: 'media_control', action: lower };
            }
            
            // System commands
            if (['brightness up', 'brightness down', 'volume up', 'volume down', 'wifi on', 'wifi off', 'bluetooth on', 'bluetooth off'].includes(lower)) {
                return { type: 'system_action', action: lower.replace(' ', '_') };
            }
            
            // Action commands
            if (['screenshot', 'copy', 'paste', 'delete', 'help'].includes(lower)) {
                return { type: lower.replace(' ', '_') };
            }
            
            // Navigation commands
            if (['home', 'back', 'recent apps'].includes(lower)) {
                return { type: 'navigate', action: lower.replace(' ', '_') };
            }
            
            // Wake phrase detection
            if (lower.includes('hey speakeasy') || lower.includes('speakeasy') || lower.includes('voice command')) {
                const afterWake = lower.replace(/^.*?(hey speakeasy|speakeasy|voice command)\s+/i, '').trim();
                if (afterWake) {
                    return mockParseCommand(afterWake);
                }
            }
            
            return null;
        }

        // Test functions
        window.testCommand = function() {
            const input = document.getElementById('commandInput');
            const result = document.getElementById('commandResult');
            const command = input.value.trim();
            
            if (!command) {
                result.textContent = 'Please enter a command to test';
                return;
            }
            
            const parsed = mockParseCommand(command);
            result.textContent = `Input: "${command}"\n\nParsed: ${JSON.stringify(parsed, null, 2)}`;
            
            // Show status
            showStatus(parsed ? 'Command parsed successfully!' : 'Command not recognized', parsed ? 'success' : 'error');
        };

        window.testSampleCommands = function() {
            const result = document.getElementById('commandResult');
            let output = 'Testing Sample Commands:\n\n';
            
            sampleCommands.forEach(command => {
                const parsed = mockParseCommand(command);
                output += `"${command}"\n  â†’ ${JSON.stringify(parsed)}\n\n`;
            });
            
            result.textContent = output;
            showStatus(`Tested ${sampleCommands.length} sample commands`, 'success');
        };

        window.runAllTests = function() {
            const results = document.getElementById('testResults');
            let output = 'ðŸ§ª Running Voice Command Tests...\n\n';
            
            // Test command parsing
            const testCommands = [
                'open chrome',
                'type hello world',
                'search weather',
                'play music',
                'screenshot',
                'help',
                'brightness up',
                'wifi on'
            ];
            
            let passed = 0;
            let total = testCommands.length;
            
            testCommands.forEach(command => {
                const parsed = mockParseCommand(command);
                if (parsed) passed++;
                output += `${parsed ? 'âœ…' : 'âŒ'} "${command}" â†’ ${JSON.stringify(parsed)}\n`;
            });
            
            output += `\nðŸ“Š Results: ${passed}/${total} commands parsed successfully\n`;
            output += passed === total ? 'ðŸŽ‰ All tests passed!' : 'âš ï¸ Some tests failed';
            
            results.textContent = output;
            showStatus(`Tests completed: ${passed}/${total} passed`, passed === total ? 'success' : 'error');
        };

        window.runQuickTest = function() {
            const results = document.getElementById('testResults');
            results.textContent = 'âš¡ Quick Test: Voice command parser is working!\n\nTry entering commands above to test individual parsing.';
            showStatus('Quick test complete', 'success');
        };

        window.clearResults = function() {
            document.getElementById('commandResult').textContent = '';
            document.getElementById('testResults').textContent = '';
            document.getElementById('status').textContent = '';
        };

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                status.textContent = '';
                status.className = 'status';
            }, 3000);
        }

        // Initialize
        console.log('âœ… Voice Command Test Page Ready');
    </script>
</body>
</html>
